"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[518],{518:(R,c,l)=>{l.r(c),l.d(c,{UserDetails:()=>G});var n=l(4341),m=l(6661),f=l(4086),o=l(8728),e=l(3664),g=l(3925),p=l(9211),h=l(4997),_=l(2200),v=l(3413);const u=i=>({"is-invalid":i});function b(i,d){if(1&i&&(e.j41(0,"div",3)(1,"div",4),e.EFF(2),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngClass",t.utilityService.alertType),e.R7$(),e.SpI(" ",t.utilityService.alertMessage," ")}}function D(i,d){1&i&&(e.j41(0,"div",2)(1,"div",5),e.nrm(2,"span",6),e.k0s()())}function C(i,d){1&i&&(e.j41(0,"div"),e.EFF(1," Please enter the Full name. "),e.k0s())}function E(i,d){1&i&&(e.j41(0,"div"),e.EFF(1," Full Name must be at least 3 characters. "),e.k0s())}function M(i,d){if(1&i&&(e.j41(0,"div",29),e.DNE(1,C,2,0,"div",30)(2,E,2,0,"div",30),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.f.fullName.errors.required),e.R7$(),e.Y8G("ngIf",t.f.fullName.errors.minlength)}}function I(i,d){1&i&&(e.j41(0,"div"),e.EFF(1," Please enter the Mobile number. "),e.k0s())}function x(i,d){1&i&&(e.j41(0,"div"),e.EFF(1," Mobile number must be at least 11 characters. "),e.k0s())}function U(i,d){if(1&i&&(e.j41(0,"div",29),e.DNE(1,I,2,0,"div",30)(2,x,2,0,"div",30),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.f.mobileNumber.errors.required),e.R7$(),e.Y8G("ngIf",t.f.mobileNumber.errors.minlength)}}function j(i,d){1&i&&(e.j41(0,"div"),e.EFF(1," Please enter the grade. "),e.k0s())}function F(i,d){if(1&i&&(e.j41(0,"div",29),e.DNE(1,j,2,0,"div",30),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.f.grade.errors.required)}}function N(i,d){1&i&&(e.j41(0,"div"),e.EFF(1," Please enter the Brith date. "),e.k0s())}function y(i,d){if(1&i&&(e.j41(0,"div",29),e.DNE(1,N,2,0,"div",30),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.f.birthDate.errors.required)}}function k(i,d){if(1&i){const t=e.RV6();e.j41(0,"div",7)(1,"app-card",8)(2,"form",9)(3,"label",10)(4,"div",11),e.nrm(5,"span",12),e.j41(6,"span"),e.EFF(7,"Change Image"),e.k0s()()(),e.j41(8,"input",13),e.bIt("change",function(s){o.eBV(t);const a=e.XpG();return o.Njj(a.onFileSelected(s))}),e.k0s()()()(),e.j41(9,"div",14)(10,"app-card",15)(11,"form",16),e.bIt("ngSubmit",function(){o.eBV(t);const s=e.XpG();return o.Njj(s.saveChanges())}),e.j41(12,"div",1)(13,"div",17)(14,"label",18),e.EFF(15,"Full name"),e.k0s(),e.j41(16,"input",19),e.mxI("ngModelChange",function(s){o.eBV(t);const a=e.XpG();return e.DH7(a.user.fullName,s)||(a.user.fullName=s),o.Njj(s)}),e.k0s(),e.DNE(17,M,3,2,"div",20),e.k0s()(),e.j41(18,"div",1)(19,"div",17)(20,"label",18),e.EFF(21,"Mobile number"),e.k0s(),e.j41(22,"input",21),e.mxI("ngModelChange",function(s){o.eBV(t);const a=e.XpG();return e.DH7(a.user.mobileNumber,s)||(a.user.mobileNumber=s),o.Njj(s)}),e.k0s(),e.DNE(23,U,3,2,"div",20),e.k0s()(),e.j41(24,"div",1)(25,"div",17)(26,"label",18),e.EFF(27,"Grade"),e.k0s(),e.j41(28,"select",22),e.mxI("ngModelChange",function(s){o.eBV(t);const a=e.XpG();return e.DH7(a.user.grade,s)||(a.user.grade=s),o.Njj(s)}),e.j41(29,"option",23),e.EFF(30,"Grade 3"),e.k0s(),e.j41(31,"option",24),e.EFF(32,"Grade 4"),e.k0s()(),e.DNE(33,F,2,1,"div",20),e.k0s()(),e.j41(34,"div",1)(35,"div",17)(36,"label",25),e.EFF(37,"Birth date"),e.k0s(),e.j41(38,"input",26),e.mxI("ngModelChange",function(s){o.eBV(t);const a=e.XpG();return e.DH7(a.user.birthDate,s)||(a.user.birthDate=s),o.Njj(s)}),e.k0s(),e.DNE(39,y,2,1,"div",20),e.k0s()(),e.j41(40,"div",27)(41,"button",28),e.EFF(42,"Save"),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("options",!1),e.R7$(3),e.xc7("background-image","url(assets/images/user/avatar-3.jpg)"),e.R7$(6),e.Y8G("options",!1),e.R7$(),e.Y8G("formGroup",t.form),e.R7$(5),e.R50("ngModel",t.user.fullName),e.Y8G("ngClass",e.eq3(17,u,t.submitted&&t.f.fullName.invalid)),e.R7$(),e.Y8G("ngIf",t.submitted&&t.f.fullName.errors),e.R7$(5),e.R50("ngModel",t.user.mobileNumber),e.Y8G("ngClass",e.eq3(19,u,t.submitted&&t.f.mobileNumber.invalid)),e.R7$(),e.Y8G("ngIf",t.submitted&&t.f.mobileNumber.errors),e.R7$(5),e.R50("ngModel",t.user.grade),e.Y8G("ngClass",e.eq3(21,u,t.submitted&&t.f.grade.invalid)),e.R7$(5),e.Y8G("ngIf",t.submitted&&t.f.grade.errors),e.R7$(5),e.R50("ngModel",t.user.birthDate),e.Y8G("ngClass",e.eq3(23,u,t.submitted&&t.f.birthDate.invalid)),e.R7$(),e.Y8G("ngIf",t.submitted&&t.f.birthDate.errors)}}let G=(()=>{class i{constructor(t,r,s,a){this.utilityService=t,this.route=r,this.fb=s,this.apiService=a,this.previewImage="assets/images/user/avatar-4.jpg",this.userId=null,this.selectedFile=null,this.submitted=!1,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.userId=this.route.snapshot.paramMap.get("id"),this.utilityService.print("Loaded user details for ID:",this.userId),this.form=this.fb.group({fullName:["",[n.k0.required,n.k0.minLength(3)]],mobileNumber:["",[n.k0.required,n.k0.minLength(11)]],grade:["",[n.k0.required]],birthDate:["",[n.k0.required]],profileImage:[null]}),this.getUserById(this.userId)}getUserById(t){this.apiService.getUserById(this.userId).subscribe({next:r=>{this.utilityService.print("Get user successfully",r),this.user=r.data,this.isLoading=!1,this.utilityService.print("the image",this.previewImage)},error:r=>console.error("Error",r)})}get f(){return this.form.controls}onFileSelected(t){if(this.selectedFile=t.target.files[0],!this.selectedFile)return;const r=new FileReader;r.onload=()=>{this.previewImage=r.result},r.readAsDataURL(this.selectedFile),this.form.patchValue({profileImage:this.selectedFile}),this.form.get("profileImage")?.updateValueAndValidity()}saveChanges(){if(this.submitted=!0,this.form.invalid)return;this.utilityService.print("Body: "+JSON.stringify(this.form.value)),this.utilityService.print("the user",this.user);const t=new FormData;t.append("user",new Blob([JSON.stringify({username:this.user.username,fullName:this.form.value.fullName,mobileNumber:this.form.value.mobileNumber,grade:this.form.value.grade,birthDate:this.form.value.birthDate})],{type:"application/json"})),this.selectedFile&&t.append("image",this.selectedFile),this.apiService.updateUser(t).subscribe({next:r=>{this.utilityService.print("Saved successfully",r),this.utilityService.showAlert(r.message,"success")},error:r=>{console.log("Errors",r),this.utilityService.showAlert(r.error.message,"error")}})}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(g.Q),e.rXU(p.nX),e.rXU(n.ok),e.rXU(h.G))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-user-details"]],decls:4,vars:3,consts:[["class","alert-popup",4,"ngIf"],[1,"row"],[1,"d-flex","justify-content-center","align-items-center",2,"height","80vh"],[1,"alert-popup"],[1,"alert-box",3,"ngClass"],[1,"text-muted","text-center"],[1,"loader"],[1,"col-md-4"],["cardTitle","Profile picture","blockClass","table-border-style",1,"col-md-4",3,"options"],["enctype","multipart/form-data",1,"d-flex","justify-content-center"],["for","fileToUpload"],[1,"profile-pic"],[1,"feather","icon-camera"],["type","file","name","fileToUpload","id","fileToUpload","accept","image/*","hidden","",3,"change"],[1,"col-md-8"],["cardTitle","User info","blockClass","table-border-style",1,"col-md-8",3,"options"],["novalidate","",1,"needs-validation",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"form-label","fw-bold"],["type","text","name","fullName","placeholder","Full name","formControlName","fullName",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","name","mobileNumber","placeholder","Mobile number","formControlName","mobileNumber",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["name","grade","formControlName","grade","ngModelOptions","{standalone: true}",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["value","3","selected",""],["value","4"],["for","endDate",1,"form-label","fw-bold"],["name","birthDate","type","date","formControlName","birthDate",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"d-flex"],["type","submit",1,"btn","btn-success"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,s){1&r&&(e.DNE(0,b,3,2,"div",0),e.j41(1,"div",1),e.nVh(2,D,3,0,"div",2),e.nVh(3,k,43,25),e.k0s()),2&r&&(e.Y8G("ngIf",s.utilityService.alertMessage),e.R7$(2),e.vxM(s.isLoading?2:-1),e.R7$(),e.vxM(s.isLoading?-1:3))},dependencies:[f.G,_.YU,_.bT,n.qT,n.xH,n.y7,n.me,n.wz,n.BC,n.cb,n.cV,n.j4,n.JD,v.i,m.J],styles:[".profile-pic[_ngcontent-%COMP%]{border-radius:50%;height:150px;width:150px;background-size:cover;background-position:center;background-blend-mode:multiply;vertical-align:middle;text-align:center;color:transparent;transition:all .3s ease;text-decoration:none;cursor:pointer}.profile-pic[_ngcontent-%COMP%]:hover{background-color:#00000080;z-index:10000;color:#fff;transition:all .3s ease;text-decoration:none}.profile-pic[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding-top:4.5em;padding-bottom:4.5em}form[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none;cursor:pointer}"]})}}return i})()}}]);