"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[976],{6976:(z,f,o)=>{o.r(f),o.d(f,{CreateUser:()=>A});var s=o(4341),u=o(6661),v=o(4086);const _=t=>{const i=t.get("password"),r=t.get("confirmPassword");return!i||!r||r.errors&&!r.errors.passwordMismatch||(i.value!==r.value?r.setErrors({...r.errors,passwordMismatch:!0}):r.errors&&(delete r.errors.passwordMismatch,0===Object.keys(r.errors).length?r.setErrors(null):r.setErrors(r.errors))),null};var e=o(3664),d=o(8728),p=o(3925),g=o(9211),C=o(4997),c=o(2200),h=o(3413);const l=t=>({"is-invalid":t});function b(t,i){if(1&t&&(e.j41(0,"div",3)(1,"div",4),e.EFF(2),e.k0s()()),2&t){const r=e.XpG();e.R7$(),e.Y8G("ngClass",r.utilityService.alertType),e.R7$(),e.SpI(" ",r.utilityService.alertMessage," ")}}function k(t,i){1&t&&(e.j41(0,"div",2)(1,"div",5),e.nrm(2,"span",6),e.k0s()())}function F(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Please enter the Full name. "),e.k0s())}function x(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Full Name must be at least 3 characters. "),e.k0s())}function G(t,i){if(1&t&&(e.j41(0,"div",31),e.DNE(1,F,2,0,"div",32)(2,x,2,0,"div",32),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",r.f.fullName.errors.required),e.R7$(),e.Y8G("ngIf",r.f.fullName.errors.minlength)}}function U(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Please enter the Username. "),e.k0s())}function j(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Username must be at least 3 characters. "),e.k0s())}function E(t,i){if(1&t&&(e.j41(0,"div",31),e.DNE(1,U,2,0,"div",32)(2,j,2,0,"div",32),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",r.f.username.errors.required),e.R7$(),e.Y8G("ngIf",r.f.username.errors.minlength)}}function N(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Please enter the Mobile number. "),e.k0s())}function R(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Mobile number must be at least 11 characters. "),e.k0s())}function w(t,i){if(1&t&&(e.j41(0,"div",31),e.DNE(1,N,2,0,"div",32)(2,R,2,0,"div",32),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",r.f.mobileNumber.errors.required),e.R7$(),e.Y8G("ngIf",r.f.mobileNumber.errors.minlength)}}function $(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Please enter the Brith date. "),e.k0s())}function P(t,i){if(1&t&&(e.j41(0,"div",31),e.DNE(1,$,2,0,"div",32),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",r.f.birthDate.errors.required)}}function Y(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Please enter the Password. "),e.k0s())}function T(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Password must be at least 8 characters. "),e.k0s())}function y(t,i){if(1&t&&(e.j41(0,"div",31),e.DNE(1,Y,2,0,"div",32)(2,T,2,0,"div",32),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",r.f.password.errors.required),e.R7$(),e.Y8G("ngIf",r.f.password.errors.minlength)}}function I(t,i){1&t&&(e.j41(0,"div",31),e.EFF(1," Confirm Password do not match. "),e.k0s())}function D(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Please enter the Confirm Password. "),e.k0s())}function M(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Confirm Password must be at least 8 characters. "),e.k0s())}function X(t,i){if(1&t&&(e.j41(0,"div",31),e.DNE(1,D,2,0,"div",32)(2,M,2,0,"div",32),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",r.f.confirmPassword.errors.required),e.R7$(),e.Y8G("ngIf",r.f.confirmPassword.errors.minlength)}}function S(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Please enter the Role. "),e.k0s())}function q(t,i){if(1&t&&(e.j41(0,"div",31),e.DNE(1,S,2,0,"div",32),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",r.f.role.errors.required)}}function V(t,i){1&t&&(e.j41(0,"div"),e.EFF(1," Please enter the Grade. "),e.k0s())}function O(t,i){if(1&t&&(e.j41(0,"div",31),e.DNE(1,V,2,0,"div",32),e.k0s()),2&t){const r=e.XpG(3);e.R7$(),e.Y8G("ngIf",r.f.grade.errors.required)}}function L(t,i){if(1&t&&(e.j41(0,"div",1)(1,"div",16)(2,"label",17),e.EFF(3,"Grade"),e.k0s(),e.j41(4,"select",33)(5,"option",34),e.EFF(6,"Grade 3"),e.k0s(),e.j41(7,"option",35),e.EFF(8,"Grade 4"),e.k0s()(),e.DNE(9,O,2,1,"div",19),e.k0s()()),2&t){const r=e.XpG(2);e.R7$(4),e.Y8G("ngClass",e.eq3(2,l,r.submitted&&r.f.grade.invalid)),e.R7$(5),e.Y8G("ngIf",r.submitted&&r.f.grade.errors)}}function B(t,i){if(1&t){const r=e.RV6();e.j41(0,"div",7)(1,"app-card",8)(2,"form",9)(3,"label",10)(4,"div",11),e.nrm(5,"span",12),e.j41(6,"span"),e.EFF(7,"Change Image"),e.k0s()()()()()(),e.j41(8,"div",13)(9,"app-card",14)(10,"form",15),e.bIt("ngSubmit",function(){d.eBV(r);const a=e.XpG();return d.Njj(a.onCreateUser())}),e.j41(11,"div",1)(12,"div",16)(13,"label",17),e.EFF(14,"Full name"),e.k0s(),e.nrm(15,"input",18),e.DNE(16,G,3,2,"div",19),e.k0s()(),e.j41(17,"div",1)(18,"div",16)(19,"label",17),e.EFF(20,"Username"),e.k0s(),e.nrm(21,"input",20),e.DNE(22,E,3,2,"div",19),e.k0s()(),e.j41(23,"div",1)(24,"div",16)(25,"label",17),e.EFF(26,"Mobile number"),e.k0s(),e.nrm(27,"input",21),e.DNE(28,w,3,2,"div",19),e.k0s()(),e.j41(29,"div",1)(30,"div",16)(31,"label",22),e.EFF(32,"Birth date"),e.k0s(),e.nrm(33,"input",23),e.DNE(34,P,2,1,"div",19),e.k0s()(),e.j41(35,"div",1)(36,"div",16)(37,"label",17),e.EFF(38,"Password"),e.k0s(),e.nrm(39,"input",24),e.DNE(40,y,3,2,"div",19),e.k0s()(),e.j41(41,"div",1)(42,"div",16)(43,"label",17),e.EFF(44,"Confirm Password"),e.k0s(),e.nrm(45,"input",25),e.DNE(46,I,2,0,"div",19)(47,X,3,2,"div",19),e.k0s()(),e.j41(48,"div",1)(49,"div",16)(50,"label",17),e.EFF(51,"Role"),e.k0s(),e.j41(52,"select",26),e.bIt("change",function(a){d.eBV(r);const m=e.XpG();return d.Njj(m.onRoleChange(a))}),e.j41(53,"option",27),e.EFF(54,"User"),e.k0s(),e.j41(55,"option",28),e.EFF(56,"Admin"),e.k0s()(),e.DNE(57,q,2,1,"div",19),e.k0s()(),e.nVh(58,L,10,4,"div",1),e.j41(59,"div",29)(60,"button",30),e.EFF(61,"Save"),e.k0s()()()()()}if(2&t){const r=e.XpG();e.R7$(),e.Y8G("options",!1),e.R7$(3),e.xc7("background-image","url(assets/images/user/avatar-3.jpg)"),e.R7$(5),e.Y8G("options",!1),e.R7$(),e.Y8G("formGroup",r.form),e.R7$(5),e.Y8G("ngClass",e.eq3(21,l,r.submitted&&r.f.fullName.invalid)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.fullName.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(23,l,r.submitted&&r.f.username.invalid)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.username.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(25,l,r.submitted&&r.f.mobileNumber.invalid)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.mobileNumber.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(27,l,r.submitted&&r.f.birthDate.invalid)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.birthDate.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(29,l,r.submitted&&r.f.password.invalid)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.password.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(31,l,r.submitted&&(r.f.confirmPassword.invalid||(null==r.f.confirmPassword.errors?null:r.f.confirmPassword.errors.passwordMismatch)))),e.R7$(),e.Y8G("ngIf",r.submitted&&(null==r.f.confirmPassword.errors?null:r.f.confirmPassword.errors.passwordMismatch)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.confirmPassword.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(33,l,r.submitted&&r.f.role.invalid)),e.R7$(5),e.Y8G("ngIf",r.submitted&&r.f.role.errors),e.R7$(),e.vxM(r.isUser?58:-1)}}let A=(()=>{class t{constructor(r,n,a,m){this.utilityService=r,this.route=n,this.fb=a,this.apiService=m,this.previewImage="assets/images/user/avatar-4.jpg",this.selectedFile=null,this.submitted=!1,this.isLoading=!1,this.isUser=!1}ngOnInit(){this.form=this.fb.group({fullName:["",[s.k0.required,s.k0.minLength(3)]],username:["",[s.k0.required,s.k0.minLength(3)]],mobileNumber:["",[s.k0.required,s.k0.minLength(11)]],grade:[""],birthDate:["",s.k0.required],role:["",s.k0.required],password:["",[s.k0.required,s.k0.minLength(8)]],confirmPassword:["",[s.k0.required,s.k0.minLength(8)]],profileImage:[null]},{validators:_}),this.form.get("role")?.valueChanges.subscribe(r=>{this.isUser="User"===r;const n=this.form.get("grade");this.isUser?n?.setValidators([s.k0.required]):n?.clearValidators(),n?.updateValueAndValidity()})}get f(){return this.form.controls}onRoleChange(r){this.isUser="User"===r.target.value}onCreateUser(){this.submitted=!0,this.form.invalid||this.apiService.createUser({fullName:this.form.value.fullName,username:this.form.value.username,mobileNumber:this.form.value.mobileNumber,birthDate:this.form.value.birthDate,grade:this.form.value.grade,role:this.form.value.role,password:this.form.value.password}).subscribe({next:n=>{this.utilityService.print("Saved successfully",n),this.utilityService.showAlert(n.message,"success")},error:n=>{console.log("Errors",n),this.utilityService.showAlert(n.error.message,"error")}})}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(p.Q),e.rXU(g.nX),e.rXU(s.ok),e.rXU(C.G))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-create-user"]],decls:4,vars:3,consts:[["class","alert-popup",4,"ngIf"],[1,"row"],[1,"d-flex","justify-content-center","align-items-center",2,"height","80vh"],[1,"alert-popup"],[1,"alert-box",3,"ngClass"],[1,"text-muted","text-center"],[1,"loader"],[1,"col-md-4"],["cardTitle","Profile picture","blockClass","table-border-style",1,"col-md-4",3,"options"],["enctype","multipart/form-data",1,"d-flex","justify-content-center"],["for","fileToUpload"],[1,"profile-pic"],[1,"feather","icon-camera"],[1,"col-md-8"],["cardTitle","User info","blockClass","table-border-style",1,"col-md-8",3,"options"],["novalidate","",1,"needs-validation",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"form-label","fw-bold"],["type","text","name","fullName","placeholder","Full name","formControlName","fullName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","name","username","placeholder","Username","formControlName","username",1,"form-control",3,"ngClass"],["type","text","name","mobileNumber","placeholder","Mobile number","formControlName","mobileNumber",1,"form-control",3,"ngClass"],["for","endDate",1,"form-label","fw-bold"],["name","birthDate","type","date","formControlName","birthDate",1,"form-control",3,"ngClass"],["type","password","name","password","placeholder","Password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword","placeholder","Confirm Password",1,"form-control",3,"ngClass"],["formControlName","role",1,"form-control",3,"change","ngClass"],["value","User"],["value","Admin"],[1,"d-flex"],["type","submit",1,"btn","btn-success"],[1,"invalid-feedback"],[4,"ngIf"],["name","grade","formControlName","grade","ngModelOptions","{standalone: true}",1,"form-control",3,"ngClass"],["value","3","selected",""],["value","4"]],template:function(n,a){1&n&&(e.DNE(0,b,3,2,"div",0),e.j41(1,"div",1),e.nVh(2,k,3,0,"div",2),e.nVh(3,B,62,35),e.k0s()),2&n&&(e.Y8G("ngIf",a.utilityService.alertMessage),e.R7$(2),e.vxM(a.isLoading?2:-1),e.R7$(),e.vxM(a.isLoading?-1:3))},dependencies:[v.G,c.YU,c.bT,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.cV,s.j4,s.JD,h.i,u.J],styles:[".profile-pic[_ngcontent-%COMP%]{border-radius:50%;height:150px;width:150px;background-size:cover;background-position:center;background-blend-mode:multiply;vertical-align:middle;text-align:center;color:transparent;transition:all .3s ease;text-decoration:none;cursor:pointer}.profile-pic[_ngcontent-%COMP%]:hover{background-color:#00000080;z-index:10000;color:#fff;transition:all .3s ease;text-decoration:none}.profile-pic[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding-top:4.5em;padding-bottom:4.5em}form[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none;cursor:pointer}"]})}}return t})()}}]);