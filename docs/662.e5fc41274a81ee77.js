"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[662],{3662:(D,l,o)=>{o.r(l),o.d(l,{SignInComponent:()=>F});var p=o(8132),_=o(4086),r=o(4341),d=o(5534),t=o(3664),v=o(4997),g=o(9211),m=o(2200);const u=e=>({"is-invalid":e});function f(e,a){if(1&e&&(t.j41(0,"div",22)(1,"div",23),t.EFF(2),t.k0s()()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngClass",n.utilityService.alertType),t.R7$(),t.SpI(" ",n.utilityService.alertMessage," ")}}function h(e,a){1&e&&(t.j41(0,"div"),t.EFF(1," Please enter your username. "),t.k0s())}function E(e,a){1&e&&(t.j41(0,"div"),t.EFF(1," Username must be at least 4 characters. "),t.k0s())}function I(e,a){if(1&e&&(t.j41(0,"div",24),t.DNE(1,h,2,0,"div",25)(2,E,2,0,"div",25),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",n.f.username.errors.required),t.R7$(),t.Y8G("ngIf",n.f.username.errors.minlength)}}function b(e,a){1&e&&(t.j41(0,"div"),t.EFF(1," Please enter your password. "),t.k0s())}function C(e,a){1&e&&(t.j41(0,"div"),t.EFF(1," Password must be at least 6 characters. "),t.k0s())}function S(e,a){if(1&e&&(t.j41(0,"div",24),t.DNE(1,b,2,0,"div",25)(2,C,2,0,"div",25),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",n.f.password.errors.required),t.R7$(),t.Y8G("ngIf",n.f.password.errors.minlength)}}let F=(()=>{class e{constructor(n,s,i,c){this.apiService=n,this.router=s,this.fb=i,this.utilityService=c,this.submitted=!1}ngOnInit(){this.loginForm=this.fb.group({username:["",[r.k0.required,r.k0.minLength(4)]],password:["",[r.k0.required,r.k0.minLength(6)]]})}get f(){return this.loginForm.controls}onSubmit(){if(this.submitted=!0,this.loginForm.invalid)return;this.utilityService.print("Form submitted:",this.loginForm.value);const n={username:this.loginForm.get("username")?.value,password:this.loginForm.get("password")?.value};this.apiService.login(n).subscribe({next:s=>{this.utilityService.print("Login successful:",s),localStorage.setItem("token",s.data.access_token),this.router.navigate(["/analytics"])},error:s=>{this.utilityService.print("Login failed:",s.error),this.utilityService.showAlert(s.error.message,"error")}})}static{this.\u0275fac=function(s){return new(s||e)(t.rXU(v.G),t.rXU(g.Ix),t.rXU(r.ok),t.rXU(d.Q))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-sign-in"]],features:[t.Jv_([d.Q])],decls:28,vars:10,consts:[["class","alert-popup",4,"ngIf"],[1,"auth-wrapper"],[1,"auth-content"],[1,"card"],[1,"row","align-items-center","text-center"],[1,"col-md-12"],[1,"card-body"],[1,"mb-3","f-w-400"],["novalidate","",3,"ngSubmit","formGroup"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"feather","icon-mail"],["type","text","formControlName","username","placeholder","Username",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"input-group","mb-4"],["id","basic-addon3",1,"input-group-text"],[1,"feather","icon-lock"],["type","password","formControlName","password","placeholder","Password",1,"form-control",3,"ngClass"],[1,"d-grid"],[1,"btn","btn-block","btn-primary","mb-4"],[1,"mb-0","text-muted"],[1,"f-w-400"],[1,"alert-popup"],[1,"alert-box",3,"ngClass"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(s,i){1&s&&(t.DNE(0,f,3,2,"div",0),t.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h4",7),t.EFF(8,"Login"),t.k0s(),t.j41(9,"form",8),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(10,"div",9)(11,"span",10),t.nrm(12,"i",11),t.k0s(),t.nrm(13,"input",12),t.DNE(14,I,3,2,"div",13),t.k0s(),t.j41(15,"div",14)(16,"span",15),t.nrm(17,"i",16),t.k0s(),t.nrm(18,"input",17),t.DNE(19,S,3,2,"div",13),t.k0s(),t.j41(20,"div",18)(21,"button",19),t.EFF(22,"SignIn"),t.k0s()()(),t.j41(23,"p",20),t.EFF(24," Don\u2019t have an account? "),t.nrm(25,"br"),t.j41(26,"a",21),t.EFF(27,"Don't ask to create an account yet."),t.k0s()()()()()()()()),2&s&&(t.Y8G("ngIf",i.utilityService.alertMessage),t.R7$(9),t.Y8G("formGroup",i.loginForm),t.R7$(4),t.Y8G("ngClass",t.eq3(6,u,i.submitted&&i.f.username.invalid)),t.R7$(),t.Y8G("ngIf",i.submitted&&i.f.username.errors),t.R7$(4),t.Y8G("ngClass",t.eq3(8,u,i.submitted&&i.f.password.invalid)),t.R7$(),t.Y8G("ngIf",i.submitted&&i.f.password.errors))},dependencies:[_.G,m.YU,m.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,p.iI,r.YN],encapsulation:2})}}return e})()}}]);